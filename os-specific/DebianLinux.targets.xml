<?xml version="1.0" encoding="UTF-8" ?>

<project basedir="." name="Runa WFE specific targets for debian">

	<dirname property="basedir.DebianLinux.targets" file="${ant.file.Runa WFE specific targets for debian}"/>
	<property name="jboss.timeout" value="240"/>

	<property name="mozilla.home" value="xulrunner"/>
        <property name="rpm.build.root" value="/home/al/rpmbuild"/>
        <property name="release.id" value="${svn.rev}.rc"/>
        <property name="web.port" value="8080"/>   
	<property name="jboss.system.root" value="/usr/share/runawfe-jboss"/>
	
        <property name="rpm.build.params" value="--nodeps"/>
	<property name="rpm.build.root.wfe" value=" --buildroot=home/al/rpmbuild/BUILDROOT/runawfe-${project.version}"/>
	<property name="url.handler" value="xdg-open"/>
	
        <import file="Linux.common.targets.xml"/>
        <target name="add.changelog">
        </target>

	<target name="makeInstaller" depends="linux.common.makeInstaller">
		<delete dir="${work.dir}/DEB_BUILD/runawfe-${project.version}"/>
		<mkdir dir="${work.dir}/DEB_BUILD/runawfe-${project.version}"/>
		<move todir="${work.dir}/DEB_BUILD/runawfe-${project.version}">
			<fileset dir="/home/al/rpmbuild/BUILDROOT/runawfe-${project.version}"/>
		</move>
		<mkdir dir="${work.dir}/DEB_BUILD/runawfe-${project.version}/debian"/>
		<copy todir="${work.dir}/DEB_BUILD/runawfe-${project.version}/debian">
			<fileset dir="wfe/resources/distr-build/rpm/DebianLinux/deb" includes="*"/>
		</copy>
		<exec executable="chmod" dir="${work.dir}/DEB_BUILD/runawfe-${project.version}/debian">
			<arg value="777"/>
			<arg value="rules"/>
			<arg value="r.sh"/>
		</exec>
		<exec executable="dpkg-buildpackage" dir="${work.dir}/DEB_BUILD/runawfe-${project.version}"/>

	        <move todir="${artifacts.dir}/DEB">
    	                <fileset dir="${work.dir}/DEB_BUILD" includes="*.deb"/> 
	        </move>
	</target>
									
</project>
