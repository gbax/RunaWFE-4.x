<?xml version="1.0"?>

<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN" 
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping auto-import="false" default-access="field" >

  <class name="ru.runa.bpm.logging.log.ProcessLog" 
         table="JBPM_LOG"
         discriminator-value="P"
         lazy="false">
    <id name="id" column="ID_">
	   	<generator class="native">
	        <param name="sequence">SEQ_JBPM_LOG</param>
	    </generator>
    </id>
    <!-- A : ru.runa.bpm.graph.log.ActionLog -->
    <!-- B : ru.runa.bpm.context.log.ByteArrayUpdateLog -->
    <!-- C : ru.runa.bpm.logging.log.CompositeLog -->
    <!-- D : ru.runa.bpm.context.log.VariableDeleteLog -->
    <!-- E : ru.runa.bpm.context.log.DateUpdateLog -->
    <!-- G : ru.runa.bpm.context.log.LongUpdateLog -->
    <!-- I : ru.runa.bpm.graph.log.ProcessInstanceCreateLog -->
    <!-- L : ru.runa.bpm.context.log.DoubleUpdateLog -->
    <!-- M : ru.runa.bpm.logging.log.MessageLog -->
    <!-- N : ru.runa.bpm.graph.log.NodeLog -->
    <!-- O : ru.runa.bpm.graph.log.TokenCreateLog -->
    <!-- P : ru.runa.bpm.logging.log.ProcessLog -->
    <!-- R : ru.runa.bpm.context.log.VariableCreateLog -->
    <!-- S : ru.runa.bpm.graph.log.SignalLog -->
    <!-- T : ru.runa.bpm.graph.log.TransitionLog -->
    <!-- U : ru.runa.bpm.context.log.StringUpdateLog -->
    <!-- V : ru.runa.bpm.context.log.VariableLog -->
    <!-- W : ru.runa.bpm.context.log.VariableUpdateLog -->
    <!-- X : ru.runa.bpm.graph.log.ProcessInstanceEndLog -->
    <!-- Y : ru.runa.bpm.graph.log.TokenEndLog -->
    <!-- Z : ru.runa.bpm.graph.log.ProcessStateLog -->
    <!-- 0 : ru.runa.bpm.taskmgmt.log.TaskLog -->
    <!-- 1 : ru.runa.bpm.taskmgmt.log.TaskCreateLog -->
    <!-- 2 : ru.runa.bpm.taskmgmt.log.TaskAssignLog -->
    <!-- 3 : ru.runa.bpm.taskmgmt.log.TaskEndLog -->
    <!-- 7 : ru.runa.bpm.graph.log.MessageNodeLog -->

    <discriminator type="char" column="CLASS_"/>
    
    <property name="index" column="INDEX_" />
    <property name="date" column="DATE_" />
    <many-to-one name="token" 
                 column="TOKEN_" 
                 class="ru.runa.bpm.graph.exe.Token"
                 foreign-key="FK_LOG_TOKEN" />
    <many-to-one name="parent" 
                 column="PARENT_" 
                 class="ru.runa.bpm.logging.log.CompositeLog" 
                 foreign-key="FK_LOG_PARENT" />
  </class>

</hibernate-mapping>
