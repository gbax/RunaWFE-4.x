<!-- 
  Settings for caches, used in WFE.
-->

<ehcache>

<!-- 
  Discover other caches for data replication.
  May be disabled if only one instance RunaWFE in cluster.
-->
<cacheManagerPeerProviderFactory 
	class="net.sf.ehcache.distribution.RMICacheManagerPeerProviderFactory" 
	properties="peerDiscovery=automatic, multicastGroupAddress=230.0.0.1, 
	multicastGroupPort=4446, timeToLive=32"/> 

<!-- 
  Creates connections between caches for replication.
  May be disabled if only one instance RunaWFE in cluster.
-->
<cacheManagerPeerListenerFactory 
	class="net.sf.ehcache.distribution.RMICacheManagerPeerListenerFactory" 
	properties="port=20450, socketTimeoutMillis=2000"/> 

<!--
  Caches actor's by code. 
  Recomended maxElementsInMemory size is greater, then executors count.
-->
<cache name="ru.runa.af.caches.actorsByCodes" 
	maxElementsInMemory="10000"
	eternal="false" 
        timeToIdleSeconds="3600"
	overflowToDisk="false"> 

	<cacheEventListenerFactory 
		class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
		properties="replicateAsynchronously=true, 
			replicatePuts=false, 
			replicateUpdates=true, 
			replicateUpdatesViaCopy=false, 
			replicateRemovals=true"/> 
</cache> 

<!--
  Caches executors's by id. 
  Recomended maxElementsInMemory size is greater, then executors count.
-->
<cache name="ru.runa.af.caches.executorsById" 
	maxElementsInMemory="10000"
	eternal="false" 
        timeToIdleSeconds="3600"
	overflowToDisk="false"> 

	<cacheEventListenerFactory 
		class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
		properties="replicateAsynchronously=true, 
			replicatePuts=false, 
			replicateUpdates=true, 
			replicateUpdatesViaCopy=false, 
			replicateRemovals=true"/> 
</cache> 

<!--
  Caches executor's by name. 
  Recomended maxElementsInMemory size is greater, then executors count.
-->
<cache name="ru.runa.af.caches.executorsByName" 
	maxElementsInMemory="10000"
	eternal="false" 
        timeToIdleSeconds="3600"
	overflowToDisk="false"> 

	<cacheEventListenerFactory 
		class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
		properties="replicateAsynchronously=true, 
			replicatePuts=false, 
			replicateUpdates=true, 
			replicateUpdatesViaCopy=false, 
			replicateRemovals=true"/> 
</cache> 

<!--
  Caches group memebers. 
  Recomended maxElementsInMemory size is greater, then executors count.
-->
<cache name="ru.runa.af.caches.groupMembers" 
	maxElementsInMemory="10000"
	eternal="false" 
        timeToIdleSeconds="3600"
	overflowToDisk="false"> 

	<cacheEventListenerFactory 
		class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
		properties="replicateAsynchronously=true, 
			replicatePuts=false, 
			replicateUpdates=true, 
			replicateUpdatesViaCopy=false, 
			replicateRemovals=true"/> 
</cache> 

<!--
  Caches executor groups (groups, in which executor present).
  Recomended maxElementsInMemory size is greater, then executors count.
-->
<cache name="ru.runa.af.caches.executorParents" 
	maxElementsInMemory="10000"
	eternal="false" 
        timeToIdleSeconds="3600"
	overflowToDisk="false"> 

	<cacheEventListenerFactory 
		class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
		properties="replicateAsynchronously=true, 
			replicatePuts=false, 
			replicateUpdates=true, 
			replicateUpdatesViaCopy=false, 
			replicateRemovals=true"/> 
</cache> 

<!--
  Caches actor members of group. 
  Recomended maxElementsInMemory size is greater, then executors count.
-->
<cache name="ru.runa.af.caches.allGroupActors" 
	maxElementsInMemory="10000"
	eternal="false" 
        timeToIdleSeconds="3600"
	overflowToDisk="false"> 

	<cacheEventListenerFactory 
		class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
		properties="replicateAsynchronously=true, 
			replicatePuts=false, 
			replicateUpdates=true, 
			replicateUpdatesViaCopy=false, 
			replicateRemovals=true"/> 
</cache> 

<!--
  Caches executor groups (groups, in which executor present recursively). 
  Recomended maxElementsInMemory size is greater, then executors count.
-->
<cache name="ru.runa.af.caches.allExecutorGroups" 
	maxElementsInMemory="10000"
	eternal="false" 
        timeToIdleSeconds="3600"
	overflowToDisk="false"> 

	<cacheEventListenerFactory 
		class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
		properties="replicateAsynchronously=true, 
			replicatePuts=false, 
			replicateUpdates=true, 
			replicateUpdatesViaCopy=false, 
			replicateRemovals=true"/> 
</cache> 

<!--
  Caches list of executors. 
-->
<cache name="ru.runa.af.caches.allExecutorsLists" 
	maxElementsInMemory="10000"
	eternal="false" 
        timeToIdleSeconds="3600"
	overflowToDisk="false"> 

	<cacheEventListenerFactory 
		class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
		properties="replicateAsynchronously=true, 
			replicatePuts=false, 
			replicateUpdates=true, 
			replicateUpdatesViaCopy=false, 
			replicateRemovals=true"/> 
</cache>

<!--
  Caches substitutors for actor. 
  Recomended maxElementsInMemory size is greater, then executors count.
-->
<cache name="ru.runa.af.caches.substitutors" 
	maxElementsInMemory="100000"
	eternal="true" 
        timeToIdleSeconds="0"
	overflowToDisk="false"> 

	<cacheEventListenerFactory 
		class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
		properties="replicateAsynchronously=true, 
			replicatePuts=false, 
			replicateUpdates=true, 
			replicateUpdatesViaCopy=false, 
			replicateRemovals=true"/> 
</cache> 

<!--
  Caches executors, which may be substituted by actor. 
  Recomended maxElementsInMemory size is greater, then executors count.
-->
<cache name="ru.runa.af.caches.substituted" 
	maxElementsInMemory="100000"
	eternal="true" 
        timeToIdleSeconds="0"
	overflowToDisk="false"> 

	<cacheEventListenerFactory 
		class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
		properties="replicateAsynchronously=true, 
			replicatePuts=false, 
			replicateUpdates=true, 
			replicateUpdatesViaCopy=false, 
			replicateRemovals=true"/> 
</cache> 

<!--
  Caches process definition by id.
-->
<cache name="ru.runa.wf.caches.definitionIdToDefinition" 
	maxElementsInMemory="10000"
	eternal="false" 
        timeToIdleSeconds="3600"
	overflowToDisk="false"> 

	<cacheEventListenerFactory 
		class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
		properties="replicateAsynchronously=true, 
			replicatePuts=false, 
			replicateUpdates=true, 
			replicateUpdatesViaCopy=false, 
			replicateRemovals=true"/> 
</cache> 

<!--
  Caches latest process definition by definition name.
-->
<cache name="ru.runa.wf.caches.definitionNameToLatestDefinition" 
	maxElementsInMemory="10000"
	eternal="false" 
        timeToIdleSeconds="3600"
	overflowToDisk="false"> 

	<cacheEventListenerFactory 
		class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
		properties="replicateAsynchronously=true, 
			replicatePuts=false, 
			replicateUpdates=true, 
			replicateUpdatesViaCopy=false, 
			replicateRemovals=true"/> 
</cache> 

<!--
  Caches swimlane names for process definition.
-->
<cache name="ru.runa.wf.caches.definitionNameToSwimlaneNames" 
	maxElementsInMemory="10000"
	eternal="false" 
        timeToIdleSeconds="3600"
	overflowToDisk="false"> 

	<cacheEventListenerFactory 
		class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
		properties="replicateAsynchronously=true, 
			replicatePuts=false, 
			replicateUpdates=true, 
			replicateUpdatesViaCopy=false, 
			replicateRemovals=true"/> 
</cache> 

<!--
  Caches process definition type.
-->
<cache name="ru.runa.wf.caches.definitionNameToType" 
	maxElementsInMemory="10000"
	eternal="false" 
        timeToIdleSeconds="3600"
	overflowToDisk="false"> 

	<cacheEventListenerFactory 
		class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
		properties="replicateAsynchronously=true, 
			replicatePuts=false, 
			replicateUpdates=true, 
			replicateUpdatesViaCopy=false, 
			replicateRemovals=true"/> 
</cache> 

<!--
  Caches process definition files.
-->
<cache name="ru.runa.wf.caches.definitionIDtoFiles" 
	maxElementsInMemory="10000"
	eternal="false" 
        timeToIdleSeconds="3600"
	overflowToDisk="false"> 

	<cacheEventListenerFactory 
		class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
		properties="replicateAsynchronously=true, 
			replicatePuts=false, 
			replicateUpdates=true, 
			replicateUpdatesViaCopy=false, 
			replicateRemovals=true"/> 
</cache> 

<!--
  Caches process definition forms.
-->
<cache name="ru.runa.wf.caches.definitionIDtoForms" 
	maxElementsInMemory="10000"
	eternal="false" 
        timeToIdleSeconds="3600"
	overflowToDisk="false"> 

	<cacheEventListenerFactory 
		class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
		properties="replicateAsynchronously=true, 
			replicatePuts=false, 
			replicateUpdates=true, 
			replicateUpdatesViaCopy=false, 
			replicateRemovals=true"/> 
</cache> 

<!--
  Caches process definition by process instance id.
-->
<cache name="ru.runa.wf.caches.instanceIDtoDefinition" 
	maxElementsInMemory="10000"
	eternal="false" 
        timeToIdleSeconds="3600"
	overflowToDisk="false"> 

	<cacheEventListenerFactory 
		class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
		properties="replicateAsynchronously=true, 
			replicatePuts=false, 
			replicateUpdates=true, 
			replicateUpdatesViaCopy=false, 
			replicateRemovals=true"/> 
</cache> 

<!--
  Caches process definition by task instance id.
-->
<cache name="ru.runa.wf.caches.taskIDtoDefinition" 
	maxElementsInMemory="10000"
	eternal="false" 
        timeToIdleSeconds="3600"
	overflowToDisk="false"> 

	<cacheEventListenerFactory 
		class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
		properties="replicateAsynchronously=true, 
			replicatePuts=false, 
			replicateUpdates=true, 
			replicateUpdatesViaCopy=false, 
			replicateRemovals=true"/> 
</cache> 

<!--
  Caches tasks list for actors.
  Recomended maxElementsInMemory size is greater, then executors count.
-->
<cache name="ru.runa.wf.caches.taskLists" 
	maxElementsInMemory="10000"
	eternal="false" 
        timeToIdleSeconds="3600"
	overflowToDisk="false"> 

	<cacheEventListenerFactory 
		class="net.sf.ehcache.distribution.RMICacheReplicatorFactory"
		properties="replicateAsynchronously=true, 
			replicatePuts=false, 
			replicateUpdates=true, 
			replicateUpdatesViaCopy=false, 
			replicateRemovals=true"/> 
</cache> 

    <defaultCache
        maxElementsInMemory="1"
        eternal="false"
        timeToIdleSeconds="3600"
        overflowToDisk="false"
        />
</ehcache>
