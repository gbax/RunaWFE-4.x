<?xml version="1.0"?>
<jbossesb parameterReloadSecs="5"
          xmlns="http://anonsvn.labs.jboss.com/labs/jbossesb/trunk/product/etc/schemas/xml/jbossesb-1.3.0.xsd"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://anonsvn.labs.jboss.com/labs/jbossesb/trunk/product/etc/schemas/xml/jbossesb-1.3.0.xsd
                              http://anonsvn.jboss.org/repos/labs/labs/jbossesb/trunk/product/etc/schemas/xml/jbossesb-1.3.0.xsd">
  <providers>
    <!--Start process instance-->
    <jms-provider name="JBossMQ" connection-factory="ConnectionFactory">
      <jms-bus busid="startProcessInstanceQuickstartGwChannel">
        <jms-message-filter dest-type="QUEUE" dest-name="queue/quickstart_webservice_startprocessinstance_gw"/>
      </jms-bus>
      <jms-bus busid="startProcessInstanceQuickstartEsbChannel">
        <jms-message-filter dest-type="QUEUE" dest-name="queue/quickstart_webservice_startprocessinstance_esb"/>
      </jms-bus>
    </jms-provider>

    <!--RunaWFE at ESB authentication service-->
    <jms-provider name="JBossMQ" connection-factory="ConnectionFactory">
      <jms-bus busid="ESB-AuthenticationQuickstartGwChannel">
        <jms-message-filter dest-type="QUEUE" dest-name="queue/quickstart_webservice_ESB-Authentication_gw"/>
      </jms-bus>
      <jms-bus busid="ESB-AuthenticationQuickstartEsbChannel">
        <jms-message-filter dest-type="QUEUE" dest-name="queue/quickstart_webservice_ESB-Authentication_esb"/>
      </jms-bus>
    </jms-provider>

    <!--RunaWFE at ESB execution service-->
    <jms-provider name="JBossMQ" connection-factory="ConnectionFactory">
      <jms-bus busid="ESB-ExecutionQuickstartGwChannel">
        <jms-message-filter dest-type="QUEUE" dest-name="queue/quickstart_webservice_ESB-Execution_gw"/>
      </jms-bus>
      <jms-bus busid="ESB-ExecutionQuickstartEsbChannel">
        <jms-message-filter dest-type="QUEUE" dest-name="queue/quickstart_webservice_ESB-Execution_esb"/>
      </jms-bus>
    </jms-provider>

    <!--1C army service-->
    <jms-provider name="JBossMQ" connection-factory="ConnectionFactory">
      <jms-bus busid="1CArmyServiceQuickstartGwChannel">
        <jms-message-filter dest-type="QUEUE" dest-name="queue/quickstart_webservice_1CArmyService_gw"/>
      </jms-bus>
      <jms-bus busid="1CArmyServiceQuickstartEsbChannel">
        <jms-message-filter dest-type="QUEUE" dest-name="queue/quickstart_webservice_1CArmyService_esb"/>
      </jms-bus>
    </jms-provider>

    <!--Start process instance at 17-->
    <jms-provider name="JBossMQ" connection-factory="ConnectionFactory">
      <jms-bus busid="17startProcessInstanceQuickstartGwChannel">
        <jms-message-filter dest-type="QUEUE" dest-name="queue/quickstart_webservice_17startprocessinstance_gw"/>
      </jms-bus>
      <jms-bus busid="17startProcessInstanceQuickstartEsbChannel">
        <jms-message-filter dest-type="QUEUE" dest-name="queue/quickstart_webservice_17startprocessinstance_esb"/>
      </jms-bus>
    </jms-provider>

    <!--Start process instance at 38-->
    <jms-provider name="JBossMQ" connection-factory="ConnectionFactory">
      <jms-bus busid="38startProcessInstanceQuickstartGwChannel">
        <jms-message-filter dest-type="QUEUE" dest-name="queue/quickstart_webservice_38startprocessinstance_gw"/>
      </jms-bus>
      <jms-bus busid="38startProcessInstanceQuickstartEsbChannel">
        <jms-message-filter dest-type="QUEUE" dest-name="queue/quickstart_webservice_38startprocessinstance_esb"/>
      </jms-bus>
    </jms-provider>

  </providers>

  <services>

    <service category="RunaexServices" name="StartProcessInstanceService"
             description="WS for starting process instance" invmScope="GLOBAL">

      <property name="maxThreads" value="5"/>

      <listeners>
        <jms-listener name="JMS-Gateway" busidref="startProcessInstanceQuickstartGwChannel" is-gateway="true"/>
        <jms-listener name="JMS-ESBListener" busidref="startProcessInstanceQuickstartEsbChannel"/>
        <http-gateway name="StartProcessInstanceServiceHttpGateway"/>
      </listeners>

      <actions mep="RequestResponse">
        <action name="proxy" class="org.jboss.soa.esb.actions.soap.proxy.SOAPProxy">
          <property name="wsdl" value="http://localhost:8180/start-process-instance/StartProcessInstanceService?wsdl"/>
        </action>
      </actions>

    </service>

    <service category="RunaexServices" name="ESB-Authentication"
             description="WS for starting process instance" invmScope="GLOBAL">

      <property name="maxThreads" value="5"/>

      <listeners>
        <jms-listener name="JMS-Gateway" busidref="ESB-AuthenticationQuickstartGwChannel" is-gateway="true"/>
        <jms-listener name="JMS-ESBListener" busidref="ESB-AuthenticationQuickstartEsbChannel"/>
        <http-gateway name="ESB-AuthenticationServiceHttpGateway"/>
      </listeners>

      <actions mep="RequestResponse">
        <action name="proxy" class="org.jboss.soa.esb.actions.soap.proxy.SOAPProxy">
          <property name="wsdl" value="http://localhost:8080/af.webservice/AuthenticationBean?wsdl"/>
        </action>
      </actions>

    </service>

    <service category="RunaexServices" name="ESB-Execution"
             description="WS for starting process instance" invmScope="GLOBAL">

      <property name="maxThreads" value="5"/>

      <listeners>
        <jms-listener name="JMS-Gateway" busidref="ESB-ExecutionQuickstartGwChannel" is-gateway="true"/>
        <jms-listener name="JMS-ESBListener" busidref="ESB-ExecutionQuickstartEsbChannel"/>
        <http-gateway name="ESB-ExecutionServiceHttpGateway"/>
      </listeners>

      <actions mep="RequestResponse">
        <action name="proxy" class="org.jboss.soa.esb.actions.soap.proxy.SOAPProxy">
          <property name="wsdl" value="http://localhost:8080/wf.webservice/ExecutionBean?wsdl"/>
        </action>
      </actions>

    </service>

    <service category="RunaexServices" name="1CArmyService" description="1C army service" invmScope="GLOBAL">

      <property name="maxThreads" value="5"/>

      <listeners>
        <jms-listener name="JMS-Gateway" busidref="1CArmyServiceQuickstartGwChannel" is-gateway="true"/>
        <jms-listener name="JMS-ESBListener" busidref="1CArmyServiceQuickstartEsbChannel"/>
        <http-gateway name="1CArmyServiceHttpGateway"/>
      </listeners>

      <actions mep="RequestResponse">
        <action name="proxy" class="org.jboss.soa.esb.actions.soap.proxy.SOAPProxy">
          <property name="wsdl" value="http://85.233.76.30/hrm/ws/hrm.1cws?wsdl"/>
          <property name="file" value="/META-INF/1CService.http.properties"/>
          <!--For now credentials doesn't requred. Set it true, to enable basic auth-->
          <property name="clientCredentialsRequired" value="false"/>
        </action>
      </actions>
    </service>

    <service category="RunaexServices" name="17-StartProcessInstanceService"
             description="WS for starting process instance" invmScope="GLOBAL">

      <property name="maxThreads" value="5"/>

      <listeners>
        <jms-listener name="JMS-Gateway" busidref="17startProcessInstanceQuickstartGwChannel" is-gateway="true"/>
        <jms-listener name="JMS-ESBListener" busidref="17startProcessInstanceQuickstartEsbChannel"/>
        <http-gateway name="17startProcessInstanceServiceHttpGateway"/>
      </listeners>

      <actions mep="RequestResponse">
        <action name="proxy" class="org.jboss.soa.esb.actions.soap.proxy.SOAPProxy">
          <property name="wsdl" value="http://10.10.31.17:8180/runaex-esb/http/RunaexServices/StartProcessInstanceService?wsdl"/>
        </action>
      </actions>

    </service>

    <service category="RunaexServices" name="38-StartProcessInstanceService"
             description="WS for starting process instance" invmScope="GLOBAL">

      <property name="maxThreads" value="5"/>

      <listeners>
        <jms-listener name="JMS-Gateway" busidref="38startProcessInstanceQuickstartGwChannel" is-gateway="true"/>
        <jms-listener name="JMS-ESBListener" busidref="38startProcessInstanceQuickstartEsbChannel"/>
        <http-gateway name="38startProcessInstanceServiceHttpGateway"/>
      </listeners>

      <actions mep="RequestResponse">
        <action name="proxy" class="org.jboss.soa.esb.actions.soap.proxy.SOAPProxy">
          <property name="wsdl" value="http://10.10.31.38:8180/runaex-esb/http/RunaexServices/StartProcessInstanceService?wsdl"/>
        </action>
      </actions>

    </service>

  </services>
</jbossesb>
