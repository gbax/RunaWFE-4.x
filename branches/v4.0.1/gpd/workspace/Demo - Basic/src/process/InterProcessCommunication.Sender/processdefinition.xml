<?xml version="1.0" encoding="UTF-8"?>

<process-definition name="InterProcessCommunication.Sender">
  <swimlane id="manager" name="swimlane">
    <assignment class="ru.runa.wfe.extension.assign.DefaultAssignmentHandler"><![CDATA[]]></assignment>
  </swimlane>
  <start-state id="Start" name="Start">
    <task name="Start" swimlane="swimlane"/>
    <transition id="tr1" name="tr1" to="Input data">
      <action class="ru.runa.wfe.extension.handler.var.FormulaActionHandler"><![CDATA[senderProcessId = get_process_id();]]></action>
    </transition>
  </start-state>
  <task-node id="Input data" name="Input data" async="false">
    <task name="Input data" swimlane="swimlane"/>
    <transition id="tr1" name="tr1" to="Send data"/>
  </task-node>
  <task-node id="ID3" name="Output data" async="false">
    <task name="Output data" swimlane="swimlane"/>
    <transition id="ID5" name="tr1" to="End"/>
  </task-node>
  <send-message id="Send data" name="Send data">
    <transition id="tr1" name="tr1" to="ID2"/>
    <variable name="msg_send" mapped-name="msg_send" access="read"/>
    <variable name="senderProcessId" mapped-name="process id" access="read"/>
    <variable name="processDefinitionName" mapped-name="InterProcessCommunication.Receiver" access="selector"/>
  </send-message>
  <receive-message id="ID2" name="Callback">
    <transition id="ID4" name="tr1" to="ID3"/>
    <variable name="processInstanceId" mapped-name="${currentInstanceId}" access="selector"/>
    <variable name="reply" mapped-name="reply" access="read"/>
  </receive-message>
  <end-state id="End" name="End"/>
</process-definition>
