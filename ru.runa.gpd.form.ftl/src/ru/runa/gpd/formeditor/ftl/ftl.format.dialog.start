<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
	<head>
		<title>Properties</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<script type="text/javascript" src="prototype.js"></script>
		<script language="javascript">

var oEditor = window.parent.InnerDialogLoaded() ;
var FCKLang = oEditor.FCKLang ;
var varTags = oEditor.FreemarkerTags;

window.onload = function () {
	// First of all, translate the dialog box texts
	oEditor.FCKLanguageManager.TranslatePage( document ) ;
	
	if (!LoadSelected()) {
		refreshExtra();
	}
	
	Event.observe("tagType", "change", refreshExtra);
	// Show the "Ok" button.
	window.parent.SetOkButton( true ) ;
}

var eSelected = oEditor.FCKSelection.GetSelectedElement() ;

function LoadSelected() {
	if ( !eSelected || !eSelected.getAttribute("ftltagname") ) {
		eSelected == null;
		return false;
	}

	$('tagType').value = eSelected.getAttribute("ftltagname");
	refreshExtra();

	$("tagFormat").value = eSelected.getAttribute("ftltagformat");
	return true;
}

function refreshExtra() {
	var tagType = $("tagType").value;
	var text = varTags.GetFormats(tagType);
	$("extra").update(text);
}

function Ok() {
	var tagType = $("tagType").value;
	var tagFormat = $("tagFormat").value;
	if ( tagType.length == 0 ) {
		alert( FCKLang.ErrNoVar ) ;
		return false ;
	}
	if ( tagFormat.length == 0 ) {
		alert( FCKLang.ErrNoTagFormat ) ;
		return false ;
	}
	varTags.AddFormat ( tagType, tagFormat );
	return true ;
}

		</script>
	</head>
	<style>
	 .leftParam {
	   width: 40%;
	 }
	 .rightParam {
	   width: 60%;
	 }
	 select {
	   width: 100%;
	 }
	</style>
	<body style="overflow: auto;">
		<table style="width: 100%; border: 0px; vertical-align: top;" height="100%">
			<tr>
				<td class="leftParam">
					<b><span fckLang="FtlVariable">Variable</span></b>: 
				</td>
				<td class="rightParam">
					<select id="tagType">
						
